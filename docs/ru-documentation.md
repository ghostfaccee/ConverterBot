# Оффициальная документация проекта RatesFlow
## Введение
**RatesFlow - телеграм-бот, использующий ExchangeRate-API для получения курса валют для конвертирования и отправки результатов пользователю**

### Структура проекта

#### Отсутствующие файлы в версии с открытым исходным кодом
Некоторые файлы проекта скрыты от пользователя для безопасности. Без них бот не запустится, тем не менее, если вы горите желанием создать нечто подобное, ниже будет указано, какие файлы отсутвуют в релизе с открытым исходным кодом, чтобы вы могли повторить подобное.

1. **.env** - В этом файле хранятся API-ключи для запросов к Telegram и ExchageRate-API, пример его оформления вы можете посмотреть в файле .env_example.

#### Структура проекта: директории
* **database/** - База данных и ее инициализация.
* **docs/** - Документации на Русском и Английском языках.
* **handlers/** - Обработчики.
* **keyboards/** - Клавиатуры.
* **languages/** - Функции для смены языков и текст на разных языках.
* **utils/** - Утилиты проекта. Отправка API-запросов к ExchangeRate-API.
* **bot.py** - Основной файл проекта. Является файлом, с которого необходимо запустить проект.
* **config.py** - Конфигурации проекта.
* **changelog.txt** - Журнал обновлений и изменений в проекте.
* **LICENSE** - Лицензия проекта.
* **README.md** - Основная документация проекта.
* **requirements.txt** - Зависимости проекта.

## Часто задаваемые вопросы | FAQ
- **В каком формате запрашивать конвертацию валют?**
Функция конвертации работает через команду: ```/convert <amount> <cur-1> <cur-2>```, где <amount> представляет собой число с палавающей точкой (т.е с запятой) и указывает на количество <cur-1>, которая представляет собой валюту, которую нужно конвертировать в <cur-2> - требуемую валюту. Неверное оформление команды приведет к тому, что бот не даст вам результат перевода валют.

- **Почему курс валют возможно получчить только в файле .json?**
Максимаьная длина телеграм сообщений - 4096, чтобы не возникало лишних ошибок с использованием функций и плохим результатом оформления, было принято решение отправлять пользователям просто файл в формате .json, который предоставляет ExchangeRate-API. Также, чтобы получить курс валют относительно доллара, вы можете использовать команду /convert, где заместо amount вы укажете число 1.

- **Почему при вводе отрицательного числа <amount> в команде /convert мы получаем положительный ответ?**
Очевидно, что отрицательных счетов валют не бывает. Поэтому, во избежание ошибок и неверных ответов, бот сразу при получении числа <amount>
берет модуль от этого числа и получает верный ответ.

- **Как изменить язык?**
Чтобы изменить язык, используйте команду /language и вам будет предложено несколько вариантов смены языка.

- **Как получить статистику профиля, курс валют и документацию помощи?**
Используйте команду /start и вам будут предложены все эти функции.

- **Как использовать калькулятор, который предоставляет бот?**
Чтобы использовать калькулятор, введите команду `/match <математическое выражение>`, где допутимые символы в математическом выражении будут следующими:
<1234567890*/()+-.> (угловые скобки не считаются). Математическое выражение должно быть неразрывным, то есть без содержания пробелов. Например, команда `/match 2*2` будет считаться верной, а команда `/match 2 * 2` - неверной. Внимательно следите за количеством пробелов и символов, иначе не получите ответа.

- **Какие валюты поддерживаются?**
Список валют, которое поддерживает API, а следовательно бот, вы можете посмотреть по [ссылке](https://www.exchangerate-api.com/docs/supported-currencies).

## Запуск бота
Чтобы запустить бота, необходимо создать файл .env и поместить в него API телеграм бота и ExchangeRate так же, как показано в файле .env_example, который находится в корне проекта. Сам файл .env необходимо создать там же.

**!-- Приведенные ниже инструкции работают только на Linux, основанных на дистрибутиве Debian (Ubuntu, Mint, Debian и т.д) --!**

1. Создайте виртуальное окрудение командой в терминале `python3 -m venv .venv`
2. Запустите виртуальное окружение `source .venv/bin/activate`
3. Установите зависимости `pip install -r requirements.txt`
4. Запустите бота `python3 bot.py`. Вероятно, может потребоваться некоторое время.

## Используемые технологии
* В этом проекте используется база данных sqlite3 для хранения пользователей и их языковых настроек, сторонние зависимости и API. 

* Версия Python: 3.12.3
